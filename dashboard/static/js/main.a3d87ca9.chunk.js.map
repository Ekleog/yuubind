{"version":3,"sources":["index.js"],"names":["matchesFilter","i","filter","split","every","elt","matchesFilterElement","slice","colonPos","indexOf","type","value","labels","some","l","name","milestone","title","Issue","badges","this","props","data","map","fgcolor","hex","r","parseInt","g","b","Math","sqrt","perceivedBrightness","color","bgcolor","key","id","className","style","backgroundColor","href","html_url","number","created_at","user","login","React","Component","List","filtered_issues","issues","search","order_filters","order","push","ordered_issues","forEach","includes","onChange","s","onSearchChange","target","Block","lists","Tab","blocks","onListSearchChange","onTabSearchChange","Dashboard","state","currentTab","startupConfig","defaultTab","config","refresh","tab","setState","block","list","Object","assign","tabs","fetchFrom","acc","url","console","log","fetch","then","resp","links","headers","get","json","sum","concat","nextRe","nextLink","find","match","undefined","next","exec","repo","keys","t","classes","onClick","setTab","reset","changeListSearch","changeTabSearch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a3d87ca9.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport startupConfig from './config.json';\n\nfunction matchesFilterElement(i, elt) {\n    if (elt === '') {\n        return true;\n    }\n    if (elt[0] === '-') {\n        return !matchesFilterElement(i, elt.slice(1));\n    }\n    const colonPos = elt.indexOf(':');\n    if (colonPos === -1) {\n        return false;\n    } else {\n        const type = elt.slice(0, colonPos);\n        const value = elt.slice(colonPos + 1);\n        if (type === 'label') {\n            return i.labels.some(l => l.name === value);\n        } else if (type === 'milestone') {\n            return i.milestone != null && i.milestone.title === value;\n        } else {\n            return false;\n        }\n    }\n}\n\nfunction matchesFilter(i, filter) {\n    return filter.split(' ').every(elt => matchesFilterElement(i, elt));\n}\n\nfunction perceivedBrightness(hex) {\n    const r = parseInt(hex.slice(0, 2), 16);\n    const g = parseInt(hex.slice(2, 4), 16);\n    const b = parseInt(hex.slice(4, 6), 16);\n    return Math.sqrt(r * r * 0.299 + g * g * 0.587 + b * b * 0.114);\n}\n\nclass Issue extends React.Component {\n    render() {\n        const badges = this.props.data.labels.map(l => {\n            const fgcolor = perceivedBrightness(l.color) > 128 ? '#000000' : '#ffffff';\n            const bgcolor = '#' + l.color;\n            return (\n                <span key={l.id}\n                      className=\"badge badge-pill mx-1\"\n                      style={{color: fgcolor, backgroundColor: bgcolor}}>\n                    {l.name}\n                </span>\n            );\n        });\n        return (\n            <li className=\"list-group-item\">\n                <div className=\"d-flex\">\n                    <div className=\"flex-grow-1\">\n                        <a className=\"text-body\" href={this.props.data.html_url}>\n                            <strong>{this.props.data.title}</strong>\n                        </a><br />\n                        <small>\n                            #{this.props.data.number} opened at {this.props.data.created_at} by {this.props.data.user.login}\n                        </small>\n                    </div>\n                    <div>\n                        {badges}\n                    </div>\n                </div>\n            </li>\n        );\n    }\n}\n\nclass List extends React.Component {\n    render() {\n        const filtered_issues = this.props.issues.filter(i => {\n            return matchesFilter(i, this.props.search);\n        });\n\n        const order_filters = this.props.order.slice();\n        order_filters.push(\"\");\n\n        const ordered_issues = [];\n        order_filters.forEach(filter => {\n            filtered_issues.forEach(i => {\n                if (matchesFilter(i, filter) && !ordered_issues.includes(i)) {\n                    ordered_issues.push(i);\n                }\n            });\n        });\n\n        const issues = ordered_issues.map(i => {\n            return (\n                <Issue key={i.id} data={i} />\n            );\n        });\n\n        return (\n            <div className=\"col\">\n                <ul className=\"list-group\">\n                    <li className=\"list-group-item\">\n                        <form>\n                            <div className=\"input-group\">\n                                <div className=\"input-group-prepend\">\n                                    <div className=\"input-group-text\">Search</div>\n                                </div>\n                                <input type=\"text\"\n                                       className=\"form-control\"\n                                       value={this.props.search}\n                                       onChange={(s) => this.props.onSearchChange(s.target.value)} />\n                            </div>\n                        </form>\n                    </li>\n                    {issues}\n                </ul>\n            </div>\n        );\n    }\n}\n\nclass Block extends React.Component {\n    render() {\n        const lists = this.props.lists.map((l, i) => {\n            return (\n                <List key={i}\n                      search={l.search}\n                      order={l.order || []}\n                      onSearchChange={(s) => this.props.onSearchChange(i, s)}\n                      issues={this.props.issues} />\n            );\n        });\n        return (\n            <div className=\"mt-3\">\n                <h1>\n                    {this.props.name}\n                </h1>\n                <div className=\"row\">\n                    {lists}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Tab extends React.Component {\n    render() {\n        const filtered_issues = this.props.issues.filter(i => {\n            return matchesFilter(i, this.props.search);\n        });\n        const blocks = this.props.blocks.map((b, i) => {\n            return (\n                <Block key={i}\n                       name={b.name}\n                       lists={b.lists}\n                       onSearchChange={(l, s) => this.props.onListSearchChange(i, l, s)}\n                       issues={filtered_issues} />\n            );\n        });\n        return (\n            <div className=\"container-fluid\">\n                <form>\n                    <div className=\"input-group\">\n                        <div className=\"input-group-prepend\">\n                            <div className=\"input-group-text\">Search</div>\n                        </div>\n                        <input type=\"text\"\n                               className=\"form-control\"\n                               value={this.props.search}\n                               onChange={(s) => this.props.onTabSearchChange(s.target.value)} />\n                    </div>\n                </form>\n                {blocks}\n            </div>\n        );\n    }\n}\n\nclass Dashboard extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            currentTab: startupConfig.defaultTab,\n            config: startupConfig,\n            issues: []\n        };\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    setTab(tab) {\n        this.setState({\n            currentTab: tab,\n            config: this.state.config,\n            issues: this.state.issues\n        });\n    }\n\n    changeListSearch(tab, block, list, search) {\n        const config = Object.assign({}, this.state.config);\n        config.tabs = Object.assign({}, config.tabs);\n        config.tabs[tab] = config.tabs[tab].slice();\n        config.tabs[tab].blocks[block] = Object.assign({}, config.tabs[tab].blocks[block]);\n        config.tabs[tab].blocks[block].lists = config.tabs[tab].blocks[block].lists.slice();\n        config.tabs[tab].blocks[block].lists[list] = Object.assign({}, config.tabs[tab].blocks[block].lists[list]);\n        config.tabs[tab].blocks[block].lists[list].search = search;\n        this.setState({\n            currentTab: this.state.currentTab,\n            config: config,\n            issues: this.state.issues\n        });\n    }\n\n    changeTabSearch(tab, search) {\n        const config = Object.assign({}, this.state.config);\n        config.tabs = Object.assign({}, config.tabs);\n        config.tabs[tab].search = search;\n        this.setState({\n            currentTab: this.state.currentTab,\n            config: config,\n            issues: this.state.issues\n        });\n    }\n\n    refresh() {\n        const fetchFrom = (acc, url) => {\n            console.log(\"Fetching \" + url);\n            fetch(url).then((resp) => {\n                const links = resp.headers.get('link');\n                resp.json().then(resp => {\n                    const sum = acc.concat(resp)\n                    this.setState({\n                        currentTab: this.state.currentTab,\n                        config: this.state.config,\n                        issues: sum\n                    });\n                    if (links !== null) {\n                        const nextRe = /<([^>]*)>; rel=\"next\"/;\n                        const nextLink = links.split(',').find(l => l.match(nextRe) !== null);\n                        if (nextLink !== undefined) {\n                            const next = nextRe.exec(nextLink)[1]\n                            fetchFrom(sum, next)\n                        }\n                    }\n                });\n            });\n        };\n        fetchFrom([], 'https://api.github.com/repos/' + this.state.config.repo + '/issues?sort=updated')\n    }\n\n    reset() {\n        this.setState({\n            currentTab: this.state.currentTab,\n            config: startupConfig,\n            issues: this.state.issues\n        })\n    }\n    \n    render() {\n        const tabs = Object.keys(this.state.config.tabs).map(t => {\n            const classes = t === this.state.currentTab ? \"nav-item active\" : \"nav-item\";\n            return (\n                <li key={t} className={classes}>\n                    <a className=\"nav-link\" onClick={() => this.setTab(t)}>\n                        {t}\n                    </a>\n                </li>\n            );\n        });\n        return (\n            <div className=\"container-fluid\">\n                <nav className=\"navbar navbar-expand-md navbar-dark bg-dark\">\n                    <ul className=\"navbar-nav mr-auto\">\n                        {tabs}\n                    </ul>\n                    <button className=\"btn btn-outline-danger mr-3\" onClick={() => this.reset()}>\n                        Reset\n                    </button>\n                    <button className=\"btn btn-outline-warning\" onClick={() => this.refresh()}>\n                        Refresh\n                    </button>\n                </nav>\n                <div className=\"mt-2\">\n                    <Tab blocks={this.state.config.tabs[this.state.currentTab].blocks}\n                         search={this.state.config.tabs[this.state.currentTab].search}\n                         onListSearchChange={(b, l, s) => this.changeListSearch(this.state.currentTab, b, l, s)}\n                         onTabSearchChange={(s) => this.changeTabSearch(this.state.currentTab, s)}\n                         issues={this.state.issues} />\n                </div>\n            </div>\n        );\n    }\n}\n\n\nReactDOM.render(\n    <Dashboard />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}